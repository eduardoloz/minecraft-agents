<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Agents Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pixelify Sans', 'Minecraft', 'Arial', sans-serif;
            background: #1a1a1a url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><rect fill="%232d2d2d" width="40" height="40"/><rect fill="%231a1a1a" width="20" height="20"/><rect fill="%231a1a1a" x="20" y="20" width="20" height="20"/></svg>');
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            border-bottom: 2px solid #c0c0c0;
            background: rgba(0, 0, 0, 0.3);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #c0c0c0;
            text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.8);
        }

        .subtitle {
            color: #a0a0a0;
            font-size: 0.95em;
        }

        .stats-bar {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .stat-box {
            background: rgba(101, 84, 192, 0.2);
            border: 2px solid #9966cc;
            padding: 15px 25px;
            border-radius: 0px;
            text-align: center;
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #c0c0c0;
        }

        .stat-label {
            color: #a0a0a0;
            font-size: 0.85em;
            margin-top: 5px;
        }

        .sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .sections {
                grid-template-columns: 1fr;
            }
        }

        .section {
            background: rgba(0, 0, 0, 0.4);
            border: 3px solid #8b7355;
            border-radius: 0px;
            padding: 25px;
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #c0c0c0;
            color: #c0c0c0;
            text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.8);
        }

        .cards {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #8b7355;
            border-radius: 0px;
            padding: 15px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
            border-color: #c0c0c0;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .player-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .status.online {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid #22c55e;
        }

        .status.idle {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid #fbbf24;
        }

        .status.offline {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }

        .status.mining {
            background: rgba(139, 115, 85, 0.3);
            color: #c0c0c0;
            border: 1px solid #c0c0c0;
        }

        .status.crafting {
            background: rgba(168, 85, 247, 0.2);
            color: #a855f7;
            border: 1px solid #a855f7;
        }

        .card-stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
            color: #a0a0a0;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
        }

        .stat-value {
            color: #00d4ff;
            font-weight: bold;
        }

        /* Minecraft hearts (replaces health-bar) */
        .hearts-container {
            display: flex;
            gap: 2px;
            align-items: center;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .heart-sprite {
            width: 18px;
            height: 18px;
            background-image: url('assets/hearts/hearts_sprite_sheet.png');
            background-size: 54px 18px;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            display: inline-block;
            flex-shrink: 0;
        }

        .heart-sprite.full {
            background-position: 0 0;
        }

        .heart-sprite.half {
            background-position: -18px 0;
        }

        .heart-sprite.empty {
            background-position: -36px 0;
        }

        .bot-badge {
            display: inline-block;
            background: rgba(124, 58, 237, 0.2);
            border: 1px solid #7c3aed;
            color: #a78bfa;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            margin-left: 8px;
            font-weight: bold;
        }

        /* Instruction Window */
        .instruction-window {
            background: rgba(0, 0, 0, 0.5);
            border: 3px solid #8b7355;
            border-radius: 0px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .instruction-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #c0c0c0;
        }

        .instruction-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #c0c0c0;
        }

        .instruction-target {
            font-size: 0.85em;
            color: #a0a0a0;
        }

        .instruction-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #8b7355;
            color: #fff;
            padding: 10px;
            border-radius: 0px;
            margin-bottom: 10px;
            font-family: 'Pixelify Sans', 'Minecraft', 'Arial', sans-serif;
            resize: vertical;
            min-height: 80px;
        }

        .instruction-input::placeholder {
            color: #666;
        }

        .instruction-input:focus {
            outline: none;
            border-color: #c0c0c0;
            box-shadow: 0 0 10px rgba(192, 192, 192, 0.3);
        }

        .instruction-button {
            width: 100%;
            background: #8b7355;
            border: 2px solid #5a4a3a;
            color: #fff;
            padding: 10px;
            border-radius: 0px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Pixelify Sans', 'Minecraft', 'Arial', sans-serif;
        }

        .instruction-button:hover {
            background: #a0866f;
            box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.2);
        }

        .instruction-button:active {
            background: #7a6a4f;
        }

        /* Detail Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal {
            background: rgba(0, 0, 0, 0.7);
            border: 4px solid #8b7355;
            border-radius: 0px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #8b7355;
            border: 2px solid #5a4a3a;
            color: #fff;
            font-size: 28px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-family: 'Pixelify Sans', 'Minecraft', 'Arial', sans-serif;
        }

        .modal-close:hover {
            background: #a0866f;
        }

        .modal-header {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px solid #c0c0c0;
            position: relative;
        }

        .avatar {
            width: 100px;
            height: 100px;
            border: 3px solid #8b7355;
            background: rgba(100, 100, 100, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            flex-shrink: 0;
        }

        .player-info h2 {
            font-size: 1.5em;
            margin-bottom: 5px;
            color: #c0c0c0;
        }

        .player-info .status {
            display: inline-block;
            margin-bottom: 10px;
        }

        .player-info-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
            color: #a0a0a0;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
        }

        .info-label {
            color: #a0a0a0;
        }

        .info-value {
            color: #c0c0c0;
            font-weight: bold;
        }

        .modal-section {
            margin-bottom: 25px;
        }

        .modal-section-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #c0c0c0;
            border-left: 4px solid #8b7355;
            padding-left: 10px;
            text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.8);
        }

        .log-entry {
            background: rgba(0, 0, 0, 0.3);
            border-left: 4px solid #8b7355;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 0px;
            font-size: 0.9em;
        }

        .log-time {
            color: #c0c0c0;
            font-weight: bold;
            font-size: 0.85em;
        }

        .log-action {
            color: #fff;
            margin-top: 5px;
        }

        .log-status {
            color: #a0a0a0;
            font-size: 0.85em;
            margin-top: 5px;
        }

        .log-status.success {
            color: #22c55e;
        }

        .log-status.warning {
            color: #fbbf24;
        }

        .log-status.error {
            color: #ef4444;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>‚õèÔ∏è Minecraft Agents Dashboard</h1>
            <p class="subtitle">Real-time Player & AI Bot Monitoring</p>
        </header>

        <div class="stats-bar">
            <div class="stat-box">
                <div class="stat-number">8</div>
                <div class="stat-label">Total Players</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">5</div>
                <div class="stat-label">Active Bots</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">7</div>
                <div class="stat-label">Online Now</div>
            </div>
        </div>

    </div>

    <div class="sections">
        <!-- Players Section -->
        <div class="section">
            <h2 class="section-title">üë• Players</h2>
            <div class="cards">
                <div class="card">
                    <div class="card-header">
                        <span class="player-name">Steve_Gaming</span>
                        <span class="status online">Online</span>
                    </div>
                    <div class="card-stats">
                        <div class="stat-item">
                            <span>Level:</span>
                            <span class="stat-value">45</span>
                        </div>
                        <div class="stat-item">
                            <span>Location:</span>
                            <span class="stat-value">Taiga</span>
                        </div>
                        <div class="stat-item">
                            <span>XP:</span>
                            <span class="stat-value">2840</span>
                        </div>
                    </div>
                    <div class="hearts-container" data-health="95"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="player-name">Luna_Explorer</span>
                        <span class="status idle">Idle</span>
                    </div>
                    <div class="card-stats">
                        <div class="stat-item">
                            <span>Level:</span>
                            <span class="stat-value">38</span>
                        </div>
                        <div class="stat-item">
                            <span>Location:</span>
                            <span class="stat-value">Ocean</span>
                        </div>
                        <div class="stat-item">
                            <span>XP:</span>
                            <span class="stat-value">1920</span>
                        </div>
                    </div>
                    <div class="hearts-container" data-health="85"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="player-name">Alex_Builder</span>
                        <span class="status offline">Offline</span>
                    </div>
                    <div class="card-stats">
                        <div class="stat-item">
                            <span>Level:</span>
                            <span class="stat-value">52</span>
                        </div>
                        <div class="stat-item">
                            <span>Last Seen:</span>
                            <span class="stat-value">2h ago</span>
                        </div>
                        <div class="stat-item">
                            <span>XP:</span>
                            <span class="stat-value">3500</span>
                        </div>
                    </div>
                    <div class="hearts-container" data-health="100"></div>
                </div>
            </div>
        </div>

        <!-- AI Bots Section -->
        <div class="section">
            <h2 class="section-title">ü§ñ AI Bots</h2>
            <div class="cards">
                <div class="card">
                    <div class="card-header">
                        <span class="player-name">MinerBot_01<span class="bot-badge">AI</span></span>
                        <span class="status mining">Mining</span>
                    </div>
                    <div class="card-stats">
                        <div class="stat-item">
                            <span>Task:</span>
                            <span class="stat-value">Mining</span>
                        </div>
                        <div class="stat-item">
                            <span>Location:</span>
                            <span class="stat-value">Cave Y:-40</span>
                        </div>
                        <div class="stat-item">
                            <span>Efficiency:</span>
                            <span class="stat-value">94%</span>
                        </div>
                    </div>
                    <div class="hearts-container" data-health="98"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="player-name">BuildBot_02<span class="bot-badge">AI</span></span>
                        <span class="status crafting">Building</span>
                    </div>
                    <div class="card-stats">
                        <div class="stat-item">
                            <span>Task:</span>
                            <span class="stat-value">Building</span>
                        </div>
                        <div class="stat-item">
                            <span>Location:</span>
                            <span class="stat-value">Plains</span>
                        </div>
                        <div class="stat-item">
                            <span>Progress:</span>
                            <span class="stat-value">68%</span>
                        </div>
                    </div>
                    <div class="hearts-container" data-health="100"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="player-name">FarmerBot_03<span class="bot-badge">AI</span></span>
                        <span class="status online">Harvesting</span>
                    </div>
                    <div class="card-stats">
                        <div class="stat-item">
                            <span>Task:</span>
                            <span class="stat-value">Farming</span>
                        </div>
                        <div class="stat-item">
                            <span>Location:</span>
                            <span class="stat-value">Farm</span>
                        </div>
                        <div class="stat-item">
                            <span>Yield:</span>
                            <span class="stat-value">1240</span>
                        </div>
                    </div>
                    <div class="hearts-container" data-health="92"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Instruction Window - Below sections -->
    <div class="instruction-window">
        <div class="instruction-header">
            <div>
                <div class="instruction-title">üìù Send Instruction</div>
                <div class="instruction-target" id="targetName">Select a bot to instruct</div>
            </div>
        </div>
        <textarea id="instructionInput" class="instruction-input"
            placeholder="Enter instruction (e.g., 'Mine stone at coordinates 100, 50, 200' or 'Build a house')"></textarea>
        <button class="instruction-button" onclick="sendInstruction()">Send Command</button>
    </div>
    </div>

    <!-- Detail Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
        <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal()">‚úï</button>

            <!-- Modal Header with Avatar and Basic Info -->
            <div class="modal-header">
                <div class="avatar" id="modalAvatar">üë§</div>
                <div class="player-info">
                    <h2 id="modalName">Player Name</h2>
                    <span class="status online" id="modalStatus">Online</span>
                    <div class="player-info-row">
                        <div class="info-item">
                            <span class="info-label">Level:</span>
                            <span class="info-value" id="modalLevel">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Type:</span>
                            <span class="info-value" id="modalType">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Location:</span>
                            <span class="info-value" id="modalLocation">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Health:</span>
                            <span class="info-value" id="modalHealth">--</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="modal-section">
                <div class="modal-section-title">üìä Statistics</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                    <div>
                        <div style="color: #a0a0a0; font-size: 0.9em;">Experience</div>
                        <div style="color: #00d4ff; font-size: 1.3em; font-weight: bold;" id="modalXP">0</div>
                    </div>
                    <div>
                        <div style="color: #a0a0a0; font-size: 0.9em;">Tasks Completed</div>
                        <div style="color: #00d4ff; font-size: 1.3em; font-weight: bold;" id="modalTasks">0</div>
                    </div>
                    <div>
                        <div style="color: #a0a0a0; font-size: 0.9em;">Uptime</div>
                        <div style="color: #00d4ff; font-size: 1.3em; font-weight: bold;" id="modalUptime">0h</div>
                    </div>
                </div>
            </div>

            <!-- Action Log Section -->
            <div class="modal-section">
                <div class="modal-section-title">üìú Action Log</div>
                <div id="actionLog">
                    <div class="log-entry">
                        <div class="log-time">14:32:45</div>
                        <div class="log-action">Started mining operation</div>
                        <div class="log-status success">‚úì Success</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedBot = null;

        // Render hearts based on data-health (percent 0-100 maps to 10 hearts)
        function renderHearts(container, healthPercent) {
            container.innerHTML = '';
            const totalHearts = 10;
            const heartsFilled = (healthPercent / 100) * totalHearts; // 0-10
            const fullHearts = Math.floor(heartsFilled);
            const halfHeart = heartsFilled % 1 >= 0.5;
            const emptyHearts = totalHearts - fullHearts - (halfHeart ? 1 : 0);

            for (let i = 0; i < fullHearts; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart-sprite full';
                container.appendChild(heart);
            }
            if (halfHeart) {
                const heart = document.createElement('div');
                heart.className = 'heart-sprite half';
                container.appendChild(heart);
            }
            for (let i = 0; i < emptyHearts; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart-sprite empty';
                container.appendChild(heart);
            }
        }

        // Card click handler
        document.addEventListener('DOMContentLoaded', function () {
            // Render all hearts based on data-health
            document.querySelectorAll('.hearts-container[data-health]').forEach(container => {
                const health = parseInt(container.getAttribute('data-health'), 10) || 100;
                renderHearts(container, health);
            });

            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.addEventListener('click', function (e) {
                    if (e.target !== this && !e.target.closest('.card-header')) {
                        e.stopPropagation();
                        return;
                    }
                    openModal(this);
                });
            });
        });

        function openModal(cardElement) {
            const playerName = cardElement.querySelector('.player-name').textContent.split('\n')[0];
            const status = cardElement.querySelector('.status').textContent;
            const stats = cardElement.querySelectorAll('.stat-value');

            selectedBot = playerName;
            document.getElementById('targetName').textContent = `Instructing: ${playerName}`;

            // Populate modal with data from card
            document.getElementById('modalName').textContent = playerName;
            document.getElementById('modalStatus').textContent = status;
            document.getElementById('modalStatus').className = `status ${status.toLowerCase()}`;

            // Extract stats (varies by player/bot)
            const statTexts = Array.from(stats).map(s => s.textContent);

            if (playerName.includes('Bot')) {
                document.getElementById('modalAvatar').textContent = 'ü§ñ';
                document.getElementById('modalType').textContent = 'AI Bot';
                document.getElementById('modalLevel').textContent = statTexts[0] || '--';
                document.getElementById('modalLocation').textContent = statTexts[1] || '--';
                document.getElementById('modalHealth').textContent = '100%';
                document.getElementById('modalXP').textContent = statTexts[2] || '0';
                document.getElementById('modalTasks').textContent = Math.floor(Math.random() * 150) + 50;
                document.getElementById('modalUptime').textContent = Math.floor(Math.random() * 48) + 2 + 'h';
            } else {
                document.getElementById('modalAvatar').textContent = 'üë§';
                document.getElementById('modalType').textContent = 'Human Player';
                document.getElementById('modalLevel').textContent = statTexts[0] || '--';
                document.getElementById('modalLocation').textContent = statTexts[1] || '--';
                document.getElementById('modalHealth').textContent = statTexts[2] || '--';
                document.getElementById('modalXP').textContent = Math.floor(Math.random() * 5000) + 1000;
                document.getElementById('modalTasks').textContent = Math.floor(Math.random() * 80) + 10;
                document.getElementById('modalUptime').textContent = Math.floor(Math.random() * 24) + 1 + 'h';
            }

            // Generate action log
            generateActionLog(playerName);

            // Show modal
            document.getElementById('modalOverlay').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('active');
            selectedBot = null;
            document.getElementById('targetName').textContent = 'Select a bot to instruct';
        }

        function generateActionLog(playerName) {
            const logContainer = document.getElementById('actionLog');
            logContainer.innerHTML = '';

            const actions = [
                { time: '14:32:45', action: 'Started mining operation', status: 'success' },
                { time: '14:28:12', action: 'Collected 64x stone blocks', status: 'success' },
                { time: '14:25:30', action: 'Encountered cave system', status: 'success' },
                { time: '14:20:15', action: 'Equipped diamond pickaxe', status: 'success' },
                { time: '14:18:00', action: 'Smelted 32x ore', status: 'success' },
                { time: '14:15:45', action: 'Low health warning detected', status: 'warning' },
                { time: '14:10:20', action: 'Collected healing items', status: 'success' },
            ];

            actions.forEach((log, index) => {
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry';
                logEntry.innerHTML = `
                    <div class="log-time">${log.time}</div>
                    <div class="log-action">${log.action}</div>
                    <div class="log-status ${log.status}">
                        ${log.status === 'success' ? '‚úì' : '‚ö†'} ${log.status.charAt(0).toUpperCase() + log.status.slice(1)}
                    </div>
                `;
                logContainer.appendChild(logEntry);
            });
        }

        function sendInstruction() {
            const input = document.getElementById('instructionInput');
            const instruction = input.value.trim();

            if (!selectedBot) {
                alert('Please select a bot first by clicking on one!');
                return;
            }

            if (!instruction) {
                alert('Please enter an instruction!');
                return;
            }

            // Simulate sending instruction
            console.log(`Instruction sent to ${selectedBot}: ${instruction}`);
            alert(`‚úì Instruction sent to ${selectedBot}:\n\n"${instruction}"`);

            input.value = '';
        }

        // Allow Enter key to send instruction
        document.getElementById('instructionInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                sendInstruction();
            }
        });
    </script>
